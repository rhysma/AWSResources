## Automating Deployment Using CI/CD Pipelines

### Cloud Computing and Application

* In the cloud, your application includes the infrastructure required to run it (virtual private clouds (VPCs), Elastic Load Balancing, Auto Scaling groups, Amazon RDS databases, Amazon S3 buckets, etc.)
* Cloud technology allows developers to provision their own infrastructure, test their code at scale, and turn off infrastructure when not in use.
* Cloud has fostered new software development methodologies such as Agile, DevOps, and DevSecOps.

### DevOps

* DevOps motto: "People over process over tools."
* DevOps involves removing barriers between development and operations teams for better communication and productivity.
* Key DevOps practices:
     * Microservice architecture
     * Continuous Integration and Continuous Delivery (CI/CD)
     * Automation of all phases of the software development lifecycle
     * Infrastructure as code (e.g., CloudFormation)
* Benefits of DevOps include improved security, reliability, and maintainability of code, and better integration of QA and security teams into the software development lifecycle.

### AWS and DevOps

* AWS provides services to help with infrastructure provisioning, application code deployment, software release process automation, and application/infrastructure performance monitoring.
* AWS CodeStar provides a unified interface for managing software development activities and setting up a CI/CD toolchain.
* AWS CodeCommit is a managed source control service that hosts secure, Git-based repositories.

### Continuous Integration and Continuous Delivery (CI/CD)

* CI is the practice of continuously checking code into a central repository and verifying each change with an automated build and test process.
* Continuous delivery extends CI to include testing in production-like stages and may include manual intervention before code is released to customers.
* Continuous deployment is the automated release of software to customers without human intervention.

### CI/CD Pipeline with AWS

* AWS code services can manage and automate your CI/CD pipeline.
* AWS CodeStar allows setting up an entire continuous delivery toolchain quickly.
* AWS CodeCommit securely stores source code to binaries and works seamlessly with existing Git tools.

### AWS Development Services

AWS CodeStar: Cloud-based development service for developing, building, and deploying applications. Allows management of software development activities in one place.

AWS CodeCommit: A source control service that hosts secure, Git-based repositories, simplifying team collaboration on code.

AWS CodeBuild: A continuous integration service that compiles source code, runs tests, and produces software packages ready for deployment.

AWS CodeDeploy: A deployment service that automates software deployments to compute services like Amazon EC2, AWS Fargate, AWS Lambda, and on-premises servers.

AWS CodePipeline: A continuous delivery service that automates the build, test, and deploy phases of your release process for reliable application and infrastructure updates.

### Infrastructure as Code

* AWS allows you to define your infrastructure as a series of scripts or code artifacts for automation and repeatability. This capability is known as "Infrastructure as Code."
* AWS CloudFormation: A service for describing and provisioning infrastructure resources. CloudFormation creates, updates, and deletes resources in environments called stacks. It's used for automated resource provisioning.

### Stacks in AWS CloudFormation

* A stack is a set of resources generated by a template. You can create, update, and delete stacks.
* When a stack is deleted, all resources in the stack are deleted by default.
* Quotas (formerly referred to as limits) that AWS has by default might affect the design of templates or stacks.

### CloudFormation Templates

* CloudFormation templates are JSON or YAML text files describing your AWS infrastructure.
* Templates include sections like: Format version, Description, Metadata, Parameters, Mappings, Conditions, Transform, Resources, and Outputs.
* Resources are the only required section, specifying stack resources and their properties.
* DependsOn attribute can be used to specify the order in which CloudFormation will create resources, allowing sequencing of events (like creating a database server before a web server).
* AWS CloudFormation templates align with DevOps practice of infrastructure as code, helping control infrastructure through software.
* The resources section is the only required section of the CloudFormation template. 

### Serverless Applications and AWS Serverless Application Model (SAM)

* Serverless Applications: With serverless applications, you provide all the necessary components to deploy a functionâ€”the code, any required dependencies, and the blueprint for the infrastructure setup. However, the environment specified in your blueprint can't be created locally.
* AWS Serverless Application Model (SAM): An open-source framework for building serverless applications. SAM is an extension of AWS CloudFormation and includes reliable deployment capabilities.
* Benefits of SAM: Allows you to build templates defining your serverless applications, which can then be deployed with CloudFormation. Helps in debugging by providing an invocation environment similar to Lambda.

### Components of AWS SAM

* Template Specification: Defines your serverless application. Provides a shorthand syntax to express the functions, APIs, permissions, configurations, and events that make up a serverless application.
* CLI (Command Line Interface): Tool to build serverless applications defined by AWS SAM templates. Helps verify AWS SAM templates are written according to the specification. Provides commands for invoking Lambda functions locally, debugging Lambda functions, packaging and deploying serverless applications to AWS Cloud, etc.

#### Integration with CI/CD Tools

AWS SAM integrates well with CI/CD tools. It can be used with AWS services like CodeBuild, CodeDeploy, CodePipeline for deployment pipelines, and AWS CodeStar for project structuring and automatic CI/CD pipeline configuration.

### AWS SAM Template Structure

* SAM templates follow the CloudFormation template format with some differences:
     * Transform Declaration: Must include Transform: AWS::Serverless-2016-10-31 to identify it as an AWS SAM template.
     * Globals Section: Unique to AWS SAM, used to define properties common to all your serverless functions and APIs.
     * Resources Section: Contains resources for both CloudFormation and AWS SAM.
     * Parameters Section: Used to declare objects and present additional prompts to the user.

* In the resource section, AWS::Serverless::Function tells CloudFormation to create a Lambda function.
* Properties section references the .zip file, handler, and runtime to be used.
* Policies section provides the IAM policy to be referenced for the function.
* The template also includes commands to create an Amazon API Gateway endpoint, with AWS SAM transform performing the mappings and permissions.
* The last part of the template creates an Amazon DynamoDB table.